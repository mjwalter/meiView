<!DOCTYPE html>
<html>
<head>
	<title>meiView Skeleton</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="support/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script type="text/JavaScript" src="support/Fabric-all.js"></script>
	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<!-- <script type="text/JavaScript" src="support/jquery-1.7.1.min.js"></script> -->
	<script type="text/JavaScript" src="support/vexflow-min.js"></script>
	<script type="text/JavaScript" src="support/meitovexflow-min.js"></script>
	<script type="text/JavaScript" src="js/loadxmldoc.js"></script>
	<script type="text/JavaScript" src="js/meiview.js"></script>
	<script type="text/JavaScript" src="js/meiview-ui.js"></script>
	<style>
		#sidebar {
			width: 200px;
			height: 400px;
		}
		#scorediv {
			width: 780px;
			height: 450px;
			border: 1px solid rgb(148,148,130);
			background-color: rgb(248,248,240);
		}
		.pagination ul>li>a {
			background-color: rgb(248,248,240);
			color: rgb(100,100,100);
		}
		
	</style>
	<script type="application/javascript" language="javascript">

		$(document).ready( function(){
			
			
			$('#sidebar').position({
				my: 'left top',
				at: 'right+10 top',
				of: $('#scorediv')
			})

			var titleElem = $('span.title')[0];
			$(titleElem).html('Henricus Isaac: Rogamus te piissima virgo Maria');

			// var wholePieceXML = meiView.getPageXML(new meiView.Page(1,24));
			// var variant_mei = meiView.loadXMLString(wholePieceXML);
			var variant_mei = loadXMLDoc('xml/Rogamus.xml');
			meiView.Apps = MeiLib.parseAPPs(variant_mei);
			console.log('JS Object:');
			console.log(meiView.Apps);
			meiView.createSourceList();

			meiView.UI.fillSideBar($('#accordion'), meiView.Sources);
			$('#accordion').accordion({
				collapsible: true
			});
				
			meiView.pages.AddPage(1, 12);
			meiView.pages.AddPage(13, 24);  
			meiView.appReplacements = {};
			meiView.appReplacements['app.m3.tie'] = new MeiLib.AppReplacement('rdg', 'rdg1.app.m3.tie');
			// meiView.appReplacements['app.n1l1s1m8'] = new MeiLib.AppReplacement('rdg', 'rdg.app.n1l1s1m8');
			// meiView.appReplacements['app01.m8'] = new MeiLib.AppReplacement('rdg', 'rdg1.n1l1s4m8');
			// meiView.appReplacements['app.n1l1s2m27'] = new MeiLib.AppReplacement('rdg', 'rdg1.app.n1l1s2m27');
			meiView.fabrCanvas = new fabric.Canvas('maincanvas');

			meiView.nextPage();

			// 	fabrCanv.add(oImg);
			// 	// var circle = new fabric.Circle({
				// 	//   radius: 5, fill: 'green', left: 100, top: 100
				// 	// });
				// 	// fabrCanv.add(circle);
				// 	
			})
			</script>
		</head>

		<body>
			<script type="text/JavaScript" src="support/bootstrap/js/bootstrap.min.js"></script>
			
			<div id="maindiv" style="margin: 10px 20px auto">
				<div id="scorediv" align="center">
					<div class="pagination" id="pagenumdiv" align="center">
						<ul>
							<li><a href="#">&laquo;</a></li>
							<li><a href="#">1</a></li>
							<li><a href="#">2</a></li>
							<li><a href="#">3</a></li>
							<li><a href="#">&raquo;</a></li>
						</ul>
					</div>
					<h4><span id='title' class='title' property='dc:title'>Title Comes Here</span></h4>
					<canvas class="canvas" id="maincanvas" width="780" height="450"></canvas>
				</div>
				<div id="sidebar">
					<div id="accordion"> 
					</div>
				</div>
			</div>

		</body>
		</html>